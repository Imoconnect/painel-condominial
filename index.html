<!DOCTYPE html><html lang="pt-br"><head>  <meta charset="UTF-8">  <title>Painel Condominial Avan√ßado</title>  <meta name="viewport" content="width=device-width, initial-scale=1">  <style>    body {      background: #f2f5fa;      font-family: 'Montserrat', Segoe UI, Arial, sans-serif;      margin: 0;      padding: 0;    }    #painelPlugavel {      box-shadow: 0 20px 64px #0057ff1a;      border-radius: 24px;      background: #fff;      padding: 32px 18px 40px 18px;      margin: 36px auto 0 auto;      max-width: 1420px;    }    nav {      margin-bottom: 24px;      display: flex;      gap: 14px;      flex-wrap: wrap;    }    .btnAbaPlug {      background: #e3f2fd;      border: none;      padding: 8px 22px;      border-radius: 8px;      font-weight: 600;      color: #236ee8;      font-size: 1.1em;      box-shadow: 0 1px 5px #aed;      transition: background .22s, color .22s;      cursor: pointer;    }    .btnAbaPlug.active {      background: #236ee8;      color: #fff;    }    .abaPlugavel {      animation: fadeInPlug .6s;    }    @keyframes fadeInPlug {      from { opacity: 0; transform: translateY(22px);}      to { opacity: 1; transform: translateY(0);}    }    label {      margin-right: 24px;      font-weight: 500;    }    input[type="text"], input[type="number"], input[type="date"], select {      border: 1px solid #ccd8f2;      border-radius: 5px;      padding: 5px 9px;      font-size: 1em;      margin-left: 7px;      margin-right: 8px;      background: #f6f9ff;      transition: box-shadow .18s;    }    input[type="text"]:focus, input[type="number"]:focus, input[type="date"]:focus, select:focus {      outline: none;      box-shadow: 0 2px 8px #236ee855;      border-color: #236ee8;      background: #e3f0ff;    }    canvas {      background: #fff;      border-radius: 10px;      box-shadow: 0 2px 12px #236ee80d;      margin-bottom: 10px;    }    button {      cursor: pointer;    }    @media (max-width: 900px) {      #painelPlugavel {        padding: 16px 5px 16px 5px;      }      nav {        gap: 7px;      }      .btnAbaPlug {        padding: 7px 8px;        font-size: 0.97em;      }    }  </style>  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@500;700&display=swap" rel="stylesheet"></head><body>  <div id="painelPlugavel">    <nav id="menuAbas"></nav>    <section id="dashboardGeral" class="abaPlugavel"></section>    <section id="dashboardFluxo" class="abaPlugavel" style="display:none"></section>    <section id="dashboardHeatmap" class="abaPlugavel" style="display:none"></section>    <section id="dashboardComparativo" class="abaPlugavel" style="display:none"></section>    <section id="dashboardTimeline" class="abaPlugavel" style="display:none"></section>  </div>  <!-- Chart.js CDN -->  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script><script>  // ---- Multi-condom√≠nios JS ----  window.condominioPadrao = {    nome: "Condom√≠nio Exemplo",    dataInicio: "",    dataFinal: "",    qtdUnid: 1,    percInad: 8,    receitas: [      {cat:'Ordin√°ria',men:0},      {cat:'Fundo de reserva',men:0},      {cat:'Consumo de √°gua',men:0},      {cat:'Consumo de luz',men:0},      {cat:'Consumo de g√°s',men:0},      {cat:'Seguran√ßa',men:0}    ],    despesas: [      {cat:'Encargos Sociais',men:0},      {cat:'Manuten√ß√£o Corretiva',men:0},      {cat:'Honor√°rios Administra√ß√£o',men:0},      {cat:'S√≠ndico Profissional',men:0},      {cat:'Servi√ßos Advocat√≠cios',men:0}    ],    obs: ""  };  window.multiCondo = JSON.parse(localStorage.getItem('multiCondo')||'null') || {"Condom√≠nio Exemplo": JSON.parse(JSON.stringify(condominioPadrao))};  window.atual = "Condom√≠nio Exemplo";  window.getPeriodoMeses = function(dataInicio, dataFinal) {    if (!dataInicio || !dataFinal) return [];    let ini = new Date(dataInicio), fim = new Date(dataFinal);    let meses = [];    let cur = new Date(ini.getFullYear(), ini.getMonth(), 1);    while (cur <= fim) {      meses.push(cur.toISOString().slice(0, 7));      cur.setMonth(cur.getMonth() + 1);    }    return meses;  };  window.renderCondoSelect = function() {    let html = `<label><b>Condom√≠nio:</b> <select id="selectCondo"></select>      <button onclick="novoCondo()" title="Novo condom√≠nio" style="margin-left:2px;">‚ûï</button>      <button onclick="removerCondo()" title="Remover condom√≠nio" style="margin-left:2px;">üóëÔ∏è</button></label>`;    html += `<label><b>Per√≠odo:</b>      <input id="dataInicio" type="date"> a      <input id="dataFinal" type="date"></label>`;    html += `<label><b>Qtd. de unidades:</b>      <input id="qtdUnid" type="number" min="1" value="1" style="width:60px"></label>`;    document.getElementById('menuAbas').innerHTML = html;    // Preenche select    let sel=document.getElementById('selectCondo');    Object.keys(multiCondo).forEach(k=>{      let o=document.createElement('option');o.textContent=k;sel.appendChild(o);    });    sel.value=atual;    sel.onchange = trocarCondo;    document.getElementById('dataInicio').oninput=function(){multiCondo[atual].dataInicio=this.value;salvarMulti();atualizaDashboards();};    document.getElementById('dataFinal').oninput=function(){multiCondo[atual].dataFinal=this.value;salvarMulti();atualizaDashboards();};    document.getElementById('qtdUnid').oninput=function(){multiCondo[atual].qtdUnid=this.value;salvarMulti();atualizaDashboards();};    // Preenche campos com dados do atual    let c = multiCondo[atual];    document.getElementById('dataInicio').value=c.dataInicio||"";    document.getElementById('dataFinal').value=c.dataFinal||"";    document.getElementById('qtdUnid').value=c.qtdUnid||1;  };  window.trocarCondo = function(){    atual = document.getElementById('selectCondo').value;    renderCondoSelect();    atualizaDashboards();  };  window.novoCondo = function(){    let nome = prompt("Nome do novo condom√≠nio:"); if(!nome||multiCondo[nome])return;    multiCondo[nome]=JSON.parse(JSON.stringify(condominioPadrao));atual=nome;    salvarMulti();    renderCondoSelect();    atualizaDashboards();  };  window.removerCondo = function(){    if(Object.keys(multiCondo).length==1){alert("N√£o pode remover o √∫nico condom√≠nio!");return;}    if(confirm("Remover o condom√≠nio "+atual+"?")){delete multiCondo[atual];atual=Object.keys(multiCondo)[0];salvarMulti();renderCondoSelect();atualizaDashboards();}  };  window.salvarMulti = function(){    localStorage.setItem('multiCondo',JSON.stringify(multiCondo));  };  window.atualizaDashboards = function(){    if(typeof dashboardGeralUpdate === "function") dashboardGeralUpdate();    if(typeof dashboardFluxoUpdate === "function") dashboardFluxoUpdate();    if(typeof dashboardHeatmapUpdate === "function") dashboardHeatmapUpdate();    if(typeof dashboardComparativoUpdate === "function") dashboardComparativoUpdate();    if(typeof dashboardTimelineUpdate === "function") dashboardTimelineUpdate();  };  document.addEventListener("DOMContentLoaded",function(){    renderCondoSelect();    atualizaDashboards();  });  // ---- Dashboards ----  // Dashboard Geral  window.dashboardGeralUpdate = function() {    let el = document.getElementById("dashboardGeral");    let c = window.multiCondo[window.atual];    let meses = getPeriodoMeses(c.dataInicio,c.dataFinal);    let receitaMes = meses.map(_=>c.receitas.reduce((a,b)=>a+Number(b.men||0),0));    let despesaMes = meses.map(_=>c.despesas.reduce((a,b)=>a+Number(b.men||0),0));    let inadPerc = Number(c.percInad)||0;    let inadMes = receitaMes.map(v=>Math.round(v*inadPerc/100));    let saldoMes = receitaMes.map((v,i)=>v-inadMes[i]-despesaMes[i]);    let saldoAcum = saldoMes.reduce((arr,v,i)=>{arr[i]=v+(arr[i-1]||0);return arr;},[]);    el.innerHTML = `      <h2 style="color:#236ee8;">Dashboard Geral ‚Äì ${window.atual}</h2>      <canvas id="grafGeralBarras" height="185"></canvas>      <div id="cardsResumoPlug" style="margin:24px 0"></div>    `;    if(window.grafGeralBarras)window.grafGeralBarras.destroy();    window.grafGeralBarras = new Chart(document.getElementById('grafGeralBarras').getContext('2d'),{      type:'bar',data:{        labels: meses.map(m=>m.slice(5,7)+"/"+m.slice(2,4)),        datasets:[          {label:'Receita',data:receitaMes,backgroundColor:'#1565c0cc'},          {label:'Despesa',data:despesaMes,backgroundColor:'#ef5350cc'},          {label:'Inadimplido',data:inadMes,backgroundColor:'#fbc02dcc'}        ]      },options:{responsive:true,plugins:{legend:{position:'top'}},scales:{y:{beginAtZero:true}}}    });    document.getElementById('cardsResumoPlug').innerHTML = `      <div style="background:#1976d211;border-radius:10px;padding:8px 10px;margin-bottom:9px">        <b>Saldo final previsto:</b><br>        <span style="font-size:1.3em;color:#1976d2;">R$ ${(saldoAcum[saldoAcum.length-1]||0).toLocaleString('pt-BR')}</span>      </div>      <div style="background:#ef535022;border-radius:10px;padding:8px 10px;">        <b>Inadimpl√™ncia total:</b><br>        <span style="font-size:1.15em;color:#ef5350;">R$ ${(inadMes.reduce((a,b)=>a+b,0)).toLocaleString('pt-BR')}</span>      </div>    `;  };  // Dashboard Fluxo de Caixa  window.dashboardFluxoUpdate = function() {    let el = document.getElementById("dashboardFluxo");    let c = window.multiCondo[window.atual];    let meses = getPeriodoMeses(c.dataInicio,c.dataFinal);    let receitaMes = meses.map(_=>c.receitas.reduce((a,b)=>a+Number(b.men||0),0));    let despesaMes = meses.map(_=>c.despesas.reduce((a,b)=>a+Number(b.men||0),0));    let inadPerc = Number(c.percInad)||0;    let inadMes = receitaMes.map(v=>Math.round(v*inadPerc/100));    let saldoMes = receitaMes.map((v,i)=>v-inadMes[i]-despesaMes[i]);    let saldoAcum = saldoMes.reduce((arr,v,i)=>{arr[i]=v+(arr[i-1]||0);return arr;},[]);    el.innerHTML = `      <h2 style="color:#388e3c;">Fluxo de Caixa ‚Äì ${window.atual}</h2>      <canvas id="grafFluxoLinha" height="190"></canvas>      <div style="margin:22px 0 0 0;"><b>Saldo acumulado final:</b> <span style="color:#1976d2;font-weight:600;font-size:1.19em;">R$ ${(saldoAcum[saldoAcum.length-1]||0).toLocaleString('pt-BR')}</span></div>    `;    if(window.grafFluxoLinha)window.grafFluxoLinha.destroy();    window.grafFluxoLinha = new Chart(document.getElementById('grafFluxoLinha').getContext('2d'),{      type:'line',data:{        labels: meses.map(m=>m.slice(5,7)+"/"+m.slice(2,4)),        datasets:[          {label:'Saldo Acumulado',data:saldoAcum,fill:true,backgroundColor:'#1976d233',borderColor:'#1976d2',tension:0.25}        ]      },      options:{plugins:{legend:{position:'top'}},scales:{y:{beginAtZero:true}}}    });  };  // Dashboard Heatmap de Despesas  window.dashboardHeatmapUpdate = function() {    let el = document.getElementById("dashboardHeatmap");    let c = window.multiCondo[window.atual];    let meses = getPeriodoMeses(c.dataInicio,c.dataFinal);    let cats = c.despesas.map(l=>l.cat||"Outros");    let totPorCat = c.despesas.map(l=>(Number(l.men)||0)*meses.length);    el.innerHTML = `      <h2 style="color:#e65100;">Heatmap de Despesas ‚Äì ${window.atual}</h2>      <canvas id="grafHeatmap" height="200"></canvas>      <div style="margin:16px 0;color:#888;">Cores mais intensas = categorias com maior peso no per√≠odo.</div>    `;    if(window.grafHeatmap)window.grafHeatmap.destroy();    window.grafHeatmap = new Chart(document.getElementById('grafHeatmap').getContext('2d'),{      type:'bar',      data:{        labels:cats,        datasets:[{          label:'Despesa Total',          data:totPorCat,          backgroundColor:totPorCat.map(v=>{            let pct = Math.min(1,v/Math.max(...totPorCat));            let c = `rgba(${230+Math.round(25*pct)},${165-Math.round(80*pct)},0,0.72)`;            return c;          })        }]      },      options:{indexAxis:'y',plugins:{legend:{display:false}},scales:{x:{beginAtZero:true}}}    });  };  // Dashboard Comparativo Multi-Condom√≠nios  window.dashboardComparativoUpdate = function() {    let el = document.getElementById("dashboardComparativo");    let nomes = Object.keys(window.multiCondo);    let periodoPadrao = window.multiCondo[window.atual].dataInicio && window.multiCondo[window.atual].dataFinal      ? getPeriodoMeses(window.multiCondo[window.atual].dataInicio,window.multiCondo[window.atual].dataFinal).length      : 12;    let inadPerc = Number(window.multiCondo[window.atual].percInad)||0;    let recs = nomes.map(n=>window.multiCondo[n].receitas.reduce((a,b)=>a+(Number(b.men)||0),0)*periodoPadrao);    let desps = nomes.map(n=>window.multiCondo[n].despesas.reduce((a,b)=>a+(Number(b.men)||0),0)*periodoPadrao);    let inad = recs.map(v=>Math.round(v*inadPerc/100));    let saldo = recs.map((v,i)=>v-inad[i]-desps[i]);    el.innerHTML = `      <h2 style="color:#3949ab;">Comparativo Multi-Condom√≠nios</h2>      <canvas id="grafComparativo" height="180"></canvas>      <div style="margin:22px 0 0 0;color:#888;">Compara√ß√£o de Receita, Despesa, Saldo e Inadimpl√™ncia entre condom√≠nios.</div>    `;    if(window.grafComparativo)window.grafComparativo.destroy();    window.grafComparativo = new Chart(document.getElementById('grafComparativo').getContext('2d'),{      type:'bar',data:{        labels:nomes,        datasets:[          {label:'Receita',data:recs,backgroundColor:'#1565c0cc'},          {label:'Despesa',data:desps,backgroundColor:'#ef5350cc